<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>jQuery Uploader</title>
<style type="text/css">
* {margin:0; padding:0;}
body {font:12px/1.5 tohama,arial;}
a {text-decoration:none}
a:hover {text-decoration:underline;}
/*.upload-btn-over {background:#f00}*/
</style>
<link rel="stylesheet" href="jquery.uploader.css">
</head>

<body>
    <h2>建议打开控制台查看上传过程</h2>

    <div id="preview"></div>
    <br>
	<span style="color:red">注意：本示例限制了只能上传jpg,gif,png|zip,rar格式，并且大小不超过200kb</span>
    <br><br>
    
	<button type="button" id="uploader">选择文件</button> 
    <a href="javascript:uploader_0.start();" style="margin-left:20px;">开始上传</a> &nbsp;&nbsp; <a href="javascript:uploader_0.cancel('*');">清空队列</a>
    <div id="queue" style="width:600px"></div>
    <br><br>


<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js"></script>
<!--script type="text/javascript" src="../static/js/jquery/jquery-1.7.2.min.js"></script-->
<script type="text/javascript" src="src/jquery.uploader.js"></script>
<script type="text/javascript">
function log(obj){
    if ('console' in window) {
        console.log(obj);
    }
}
$(function(){
    var previewHTML = '';
    
    $('#uploader').uploader({
        action: 'upload.php',
        //mode: 'flash',
        multi: true,
        auto: false,
        showQueue: '#queue',
        fileSizeLimit: '200k',
        fileTypeDesc: '选择图片|选择压缩文件',
        fileTypeExts: 'jpg,gif,png|zip,rar',
        /*onMouseClick: function(){
            //log('onMouseClick')
        },
        onMouseOver: function(el){
            //log('onMouseOver')
        },
        onMouseOut: function(el){
            //log('onMouseOut')
        },*/
        onInit:function(){
            log('onInit');
            log("==========================");
        },
        onSelected: function(filelist){
            log(' ');
            log('onSelected');
            log(filelist);
            log("==========================");
        },
        onCancel: function(file){
            log('onCancel');
            log(file);
            log("==========================");
        },
        onStart: function(e){
            log('onStart');
            log("==========================");
        },
        onProgress: function(e){
            log('onProgress')
            log(e)
            log("==========================");
        },
        onError: function(e){
            log('onError');
            log(e);
            log("==========================");
        },
        onSuccess: function(e){
            log('onSuccess');
            log(e);
            if (e.file.type === "image/jpeg") previewHTML += '<img src="'+ e.data +'">';
            log("==========================");
        },
        onComplete: function(e){
            log('onComplete');
            log(e);
            log("==========================");
        },
        onAllComplete: function(){
            log('onAllComplete');
            if ( previewHTML ) {
                $('#preview').append(previewHTML);
                previewHTML = '';
            }
            log("==========================");
        },
        onClearQueue: function(){
            log('onClearQueue');
            log("==========================");
        }
    }); 
});
</script>
</body>
</html>
